# 组件通信

在Vue中，组件之间通信有多种情况：

- 父组建 --> 子组件，使用props
- 子组件 --> 父组件，使用$emit
- 组件 <--> 组件
- 跨级组件通信

## 1 自定义事件

前面学习到，一个组件可以有事件，例如点击事件，键盘事件等。

给一个按钮绑定点击事件可以这样写：`<button @click="clickFun"></button>`，那么，绑定一个自定义事件要怎么写呢？很简单，直接在标签中绑定事件名即可，例如在一个组件中声明一个`addNum`事件：`<my-component @addNum="addNum"></my-component>`,这样便可以绑定事件了，完整代码：

```html
<div id="app">
	<my-component @addNum="addNum"></my-component>
</div>
<script type="text/javascript">
	Vue.component("my-component", {
		template:"<div></div>s"	
	});
	var app = new Vue({
		el:"#app",
		methods:{
			addNum: function() {
				// 当addNum事件发生时，执行当前函数
			}
		}	
	});
</script>
```

以上代码显而易见，当`my-component`中的`addNum`事件被调用的时候，会调用相关的方法，和绑定一个`click`事件没什么不同，那么，我们该如何触发这个事件呢？答案是使用**$emit**，$emit不仅可以用来触发事件，还可以用来子组件向父组件传递数据。

### $emit

$emit可以把他理解为一个*触发器*，可以在子组件中执行这个触发器，触发父组件的事件。例如，父组件中一个`eventA`事件，在子组件中，可以使用`this.$emit('eventA')`来触发这个事件，同时，该触发器的第二个参数还可以用来传递数据，`this.$emit('eventA',mydata)`。

下面是一个简单的例子：
```html
<div id="app">
	<my-component @eventA="eventA"></my-component>
</div>
<script type="text/javascript">
	Vue.component("my-component",{
		template:"<button @click='btnClick'>click me<button>",
		data:{
			message:"这里是子组件的数据"
		},
		methods:{
			btnClick:function() {
				console.log("按钮被点击");
				this.$emit("eventA", this.message); // 触发父组件的eventA事件，并且传递数据
			}
		}	
	});
	var app = new Vue({
		el:"#app",
		methods:{
			eventA: function(message){
				console.log("eventA事件被触发：传递进来的数据为");
				console.log(message); // 输出“这里是子组件的数据”
			}
		}	
	});
</script>
```
## 2 使用`v-model`
## 3 非父子组件通信